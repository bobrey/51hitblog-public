<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title> Cordova插件_native - </title>
  <meta name="description" content="" />
  <meta property="og:title" content="Cordova插件_native" />
  <meta name="twitter:title" content="Cordova插件_native" />
  <meta name="description" content="创建插件 首先创建一个叫carrier的插件的文件夹，其中有js接口定义和plugin.xml。还创建了一个叫src的子文件夹并向其中创建了一">
  <meta property="og:description" content="创建插件 首先创建一个叫carrier的插件的文件夹，其中有js接口定义和plugin.xml。还创建了一个叫src的子文件夹并向其中创建了一">
  <meta name="twitter:description" content="创建插件 首先创建一个叫carrier的插件的文件夹，其中有js接口定义和plugin.xml。还创建了一个叫src的子文件夹并向其中创建了一">
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://www.51hint.com/posts/cordovacha-jian-_native/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="IT技术分享" />

  <meta name="generator" content="Hugo 0.81.0" />
  <link rel="canonical" href="https://www.51hint.com/posts/cordovacha-jian-_native/" />
  <link rel="alternate" href="https://www.51hint.com/index.xml" type="application/rss+xml" title="IT技术分享">
  
  
  <script src="https://www.51hint.com/js/jquery-1.12.4.min.js"></script>
  <link rel="stylesheet" href="https://www.51hint.com/css/katex.min.css" />
  <link rel="stylesheet" href="https://www.51hint.com/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://www.51hint.com/css/bootstrap.min.css" />
  
  
  
  <link rel="stylesheet" href="https://www.51hint.com/css/main.css" />
  
  
  
  



<link rel="stylesheet" href="https://www.51hint.com/css/photoswipe.css" />
<link rel="stylesheet" href="https://www.51hint.com/css/default-skin/default-skin.css" />





<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>




<link rel="stylesheet" href="https://www.51hint.com/css/styles/atom-one-dark.css" />
<script src="https://www.51hint.com/js/highlight.pack.js"></script>

<script>hljs.initHighlightingOnLoad();</script>
</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.51hint.com/">IT技术分享</a>
    </div>
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        

        

        
        
          <li>
            <a id="mSearch" href="#modalSearch" data-toggle="modal" data-target="#modalSearch" style="outline: none;">
              <span class="hidden-sm hidden-md hidden-lg">Search</span> <span id="searchGlyph" class="glyphicon glyphicon-search"></span>
            </a>
          </li>
          
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
      </div>
    </div>

  </div>
</nav>







    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-md-offset-0">
            <div class="posts-heading">
                <h1 align="center">Cordova插件_native</h1>
                
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>




<div id="fastSearch">
  <input id="searchInput" tabindex="0">
  <ul id="searchResults">
  </ul>
</div>

<script src="/js/fuse.min.js"></script>
<script src="/js/fastsearch.js"></script>
<link rel="stylesheet" href="https://www.51hint.com/css/fast.css" />
    
<div class="container" role="main" itemscope itemtype="http://schema.org/Article">
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
            
            
            
<div>
    <section id="datecount">
        <h4 id="date"> Thu Mar 2, 2017</h4>
    </section>
    <h5 id="wc">1800 Words|Read in about 4 Min</h5>
    <h5 id="tags">Tags: 
        
        <a href="https://www.51hint.com/tags/nodejs/">nodejs</a> &nbsp;
    </h5>
</div>

            
            <article role="main" class="blog-post" itemprop="articleBody" id="content">
                
  
  <aside class="toc">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#创建插件">创建插件</a></li>
    <li><a href="#创建android插件">创建Android插件</a></li>
  </ul>
</nav>
  </aside>
  


                <h2 id="创建插件">创建插件</h2>
<ul>
<li>
<p>首先创建一个叫<code>carrier</code>的插件的文件夹，其中有js接口定义和<code>plugin.xml</code>。还创建了一个叫<code>src</code>的子文件夹并向其中创建了一个名叫<code>android</code>的文件夹用来存放native代码。这么做不是必要的但显得有条理。</p>
</li>
<li>
<p>在写native代码前要定义向Cordova应用公开的js接口。创建方法跟上个例子一样，这个例子中创建一个叫carrier的对象，在其中定义了一个或多个能被Cordova应用调用的方法，本例中将公开<code>getCarrierName</code>和<code>getCountryCode</code>方法。</p>
</li>
<li>
<p>它们调用<code>cordova.exec</code>方法，由它向native代码要控制权。这就是著名的Javscript-to-native桥接，可以让Cordova应用执行native API。native代码执行完后，调用回调函数并把结果返回给js对象。</p>
</li>
</ul>
<p>cordova.exec方法声明如下:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">,</span> <span class="s1">&#39;Pluginobject&#39;</span><span class="p">,</span> <span class="s1">&#39;pluginMethod&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">arguments</span><span class="p">]);</span>
</code></pre></div><blockquote>
<p><!-- raw HTML omitted -->&lsquo;Pluginobject&rsquo;参数是一个字符串用于识别包括被调用方法的native对象，&lsquo;pluginMethod&rsquo;参数是一个字符串，用来识别要执行的方法，最后的&rsquo;arguments&rsquo;是一个可选的参数数组，用来传递给pluginMethod。<!-- raw HTML omitted --></p>
</blockquote>
<p>例子中的<code>getCarrierName</code>和<code>getCountryCode</code>方法不需要任何参数，arguments参数为空并表示为&quot;[]&quot;。</p>
<p>下面是<code>carrier.js</code>的代码，插件的js接口。它开始用声明了一个cordova对象，指向加载的公开exec方法的cordova js库。
接下来创建carrier对象，定义两个方法。每个方法都调用了cordova.exec并传入了cordova对象必要的函数名、对象和方法名，用来定位正确的完成功能的native对象和方法。文件最后是module.exports赋值，让carrier对象向Cordova应用公开。代码如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">cordova</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cordova&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">carrier</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">getCarrierName</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">,</span> <span class="s1">&#39;CarrierPlugin&#39;</span><span class="p">,</span> <span class="s1">&#39;getCarrierName&#39;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="p">},</span>

    <span class="nx">getCountryCode</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">,</span> <span class="s1">&#39;CarrierPlugin&#39;</span><span class="p">,</span> <span class="s1">&#39;getCountryCode&#39;</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">carrier</span><span class="p">;</span> 
</code></pre></div><h2 id="创建android插件">创建Android插件</h2>
<p>可以通过创建一个Cordova项目创建插件，然后向应用中写Java类和js接口文件。应用中插件可以工作后再把它们抽取出来放在单独的文件夹用来发布。照这么做的话，可以为插件创建一个文件夹，然后创建一个新的Cordova项目，并使用CLI把插件添加进去。这样就可以独立开发插件并同时测试plugin.xml了。</p>
<p>这个插件将向Cordova应用返回的信息来自于电话API。使用这个API前应用必须引入Context和TelephoneManager类：</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.telephony.TelephonyManager</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.json.JSONArray</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarrierPlugin</span> <span class="kd">extends</span> <span class="n">CordovaPlugin</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ACTION_GET_CARRIER_NAME</span> <span class="o">=</span> <span class="s">&#34;getCarrierName&#34;</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ACTION_GET_COUNTRY_CODE</span> <span class="o">=</span> <span class="s">&#34;getCountryCode&#34;</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">TelephonyManager</span> <span class="n">tm</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">CordovaInterface</span> <span class="n">cordova</span><span class="o">,</span> <span class="n">CordovaWebView</span> <span class="n">webView</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">cordova</span><span class="o">,</span> <span class="n">webView</span><span class="o">);</span>

        <span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">cordova</span><span class="o">.</span><span class="na">getActivity</span><span class="o">().</span><span class="na">getApplicationContext</span><span class="o">();</span>
        <span class="n">tm</span> <span class="o">=</span> <span class="o">(</span><span class="n">TelephonyManager</span><span class="o">)</span><span class="n">context</span><span class="o">.</span><span class="na">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">TELEPHONY_SERVICE</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">execute</span><span class="o">(</span><span class="n">String</span> <span class="n">action</span><span class="o">,</span> <span class="n">JSONArray</span> <span class="n">args</span><span class="o">,</span> <span class="n">CallbackContext</span> <span class="n">callbackContext</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JSONException</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">ACTION_GET_CARRIER_NAME</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">action</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">callbackContext</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">tm</span><span class="o">.</span><span class="na">getSimOperatorName</span><span class="o">());</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">ACTION_GET_COUNTRY_CODE</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">action</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">callbackContext</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">tm</span><span class="o">.</span><span class="na">getSimCountryIso</span><span class="o">());</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">callbackContext</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;Invalid Action&#34;</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Exception: &#34;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
            <span class="n">callbackContext</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span> 
</code></pre></div><p>以上是所有需要的编码。在使用CLI添加新插件之前还需要创建一个plugin.xml文件，它和前边MoL示例相似，但其中因为多了native组件，还需要些额外的设置。内容如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span class="nt">&lt;plugin</span> <span class="na">xmlns=</span><span class="s">&#34;http://apache.org/cordova/ns/plugins/1.0&#34;</span> <span class="na">id=</span><span class="s">&#34;com.learningplugin.carrier&#34;</span> <span class="na">version=</span><span class="s">&#34;1.0.0&#34;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Carrier<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;author&gt;</span>Zhang San<span class="nt">&lt;/author&gt;</span>
    <span class="nt">&lt;description&gt;</span>Expose mobile carrier related values to Cordova application.<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;keywords&gt;</span>carrier<span class="nt">&lt;/keywords&gt;</span>
    <span class="nt">&lt;license&gt;</span>Apache 2.0 License<span class="nt">&lt;/license&gt;</span>
    <span class="nt">&lt;engines&gt;</span>
        <span class="nt">&lt;engine</span> <span class="na">name=</span><span class="s">&#34;cordova&#34;</span> <span class="na">version=</span><span class="s">&#34;5.0.0&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/engines&gt;</span>
    <span class="nt">&lt;js-module</span> <span class="na">src=</span><span class="s">&#34;carrier.js&#34;</span> <span class="na">name=</span><span class="s">&#34;carrier&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;clobbers</span> <span class="na">target=</span><span class="s">&#34;carrier&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/js-module&gt;</span>
    <span class="nt">&lt;platform</span> <span class="na">name=</span><span class="s">&#34;android&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;source-file</span> <span class="na">src=</span><span class="s">&#34;src/android/CarrierPlugin.java&#34;</span> <span class="na">target-dir=</span><span class="s">&#34;src/com/cordovalearingplugin/carrier&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;config-file</span> <span class="na">target=</span><span class="s">&#34;res/xml/config.xml&#34;</span> <span class="na">parent=</span><span class="s">&#34;/*&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;feature</span> <span class="na">name=</span><span class="s">&#34;CarrierPlugin&#34;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&#34;android-package&#34;</span> <span class="na">value=</span><span class="s">&#34;com.cordovalearingplugin.carrier.CarrierPlugin&#34;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/feature&gt;</span>
        <span class="nt">&lt;/config-file&gt;</span>
        <span class="nt">&lt;config-file</span> <span class="na">target=</span><span class="s">&#34;AndroidManifest.xml&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.READ_PHONE_STATE&#34;</span> <span class="nt">/&gt;</span>  
        <span class="nt">&lt;/config-file&gt;</span>
    <span class="nt">&lt;/platform&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div><blockquote>
<p>文件中js-module元素定义了js的名字，它将在应用开始时自动加载。它定义了向Cordova公开的js接口。clobbers元素指明了js对象赋值给加载的js对象。本例中，Carrier插件通过一个carrier对象向Cordova应用公开。</p>
</blockquote>
<blockquote>
<p>Cordova应用通过carrier对象访问getCarrierName方法：</p>
</blockquote>
<p>为了测试插件创建一个简单的应用。打开命令行，输入以下命令:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">cordova create nativePlugin com.cordovalearningplugin.nativePlugin NativePlugin
<span class="nb">cd</span> nativePlugin
cordova platform add android
cordova plugin add your_carrier_plugin_location
</code></pre></div><p>在应用的index.html中显示两个按钮，一个调用getCarrierName另一个调用getCountryCode。执行相同的execute函数来显示两个方法的结果，代码如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Carrier Demo<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html;charset=utf-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;cordova.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span><span class="p">&gt;</span>
        <span class="kd">function</span> <span class="nx">onBodyLoad</span><span class="p">()</span> <span class="p">{</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;deviceready&#34;</span><span class="p">,</span> <span class="nx">onDeviceReady</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="kd">function</span> <span class="nx">onDeviceReady</span><span class="p">()</span> <span class="p">{</span>

        <span class="p">};</span>

        <span class="kd">function</span> <span class="nx">doSomething1</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">carrier</span><span class="p">.</span><span class="nx">getCarrierName</span><span class="p">(</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFailure</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">doSomething2</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">carrier</span><span class="p">.</span><span class="nx">getCountryCode</span><span class="p">(</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFailure</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">onSuccess</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">resStr</span> <span class="o">=</span> <span class="s2">&#34;Result: &#34;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">onFailure</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;onFailure: &#34;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;Failure: &#34;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&#34;onBodyLoad()&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Carrier Demo<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
        This is a Cordova application that uses my fancy new Carrier Plugin.
    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&#34;doSomething1();&#34;</span><span class="p">&gt;</span>GetCarrierName<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&#34;doSomething2()&#34;</span><span class="p">&gt;</span>GetCountryCode<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p><img src="https://segmentfault.com/img/bVmQtz" alt=""></p>

            </article>

            <ul class="pager blog-pager">
                
                <li class="previous">
                    <a href="https://www.51hint.com/posts/cordovacha-jian-_js/" data-toggle="tooltip" data-placement="top" title="cordova插件_js">&larr; Previous Post</a>
                </li>
                 
                <li class="next">
                    <a href="https://www.51hint.com/posts/visual-studio-tools-for-apache-cordova/" data-toggle="tooltip" data-placement="top" title="Visual Studio Tools  for Apache Cordova">Next Post &rarr;</a>
                </li>
                
            </ul>
            
            <div>
                 
                <h2>See Also</h2>
                <ul>
                    
                    <li><a href="/posts/cordovacha-jian-_js/">cordova插件_js</a></li>
                    
                    <li><a href="/posts/promise-and-rxjs/">Promise  and rxjs</a></li>
                    
                    <li><a href="/posts/promise-and-generators-yield/">Promise and generators (yield)</a></li>
                    
                    <li><a href="/posts/nvm/">nvm</a></li>
                    
                    <li><a href="/posts/untitled-3/">Yarn &#43; Webpack</a></li>
                    
                </ul>
                
            </div>
            
            
            
            
<div>
    <section id="datecount">
        <h4 id="date"> Thu Mar 2, 2017</h4>
    </section>
    <h5 id="wc">1800 Words|Read in about 4 Min</h5>
    <h5 id="tags">Tags: 
        
        <a href="https://www.51hint.com/tags/nodejs/">nodejs</a> &nbsp;
    </h5>
</div>

            
            </div>
            
            
        </div>
    </div>
    </section>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
        
          
          
        </ul>
        <p class="credits copyright text-muted">
        &copy;2017-2018
          
          
          
            &nbsp;&bull;&nbsp;
            <a href="https://www.51hint.com/">IT技术分享</a>
          
        </p>
        <p class="credits theme-by text-muted">
          
        </p>

        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.81.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/rootsongjc/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>




<script src="https://www.51hint.com/js/bootstrap.min.js"></script>
<script src="https://www.51hint.com/js/photoswipe-ui-default.min.js"></script>
<script src="https://www.51hint.com/js/photoswipe.min.js"></script>
<script src="https://www.51hint.com/js/auto-render.min.js"></script>
<script src="https://www.51hint.com/js/main.js"></script>
<script src="https://www.51hint.com/js/prism.js"></script>
<script src="https://www.51hint.com/js/katex.min.js"></script>

<script> renderMathInElement(document.body); </script>







  </body>
</html>


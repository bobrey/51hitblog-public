<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title> socket - </title>
  <meta name="description" content="" />
  <meta property="og:title" content="socket" />
  <meta name="twitter:title" content="socket" />
  <meta name="description" content="htonl() &lt;p&gt; 简述：&lt;br /&gt; 将主机的无符号短整形数转换成网络字节顺序。&lt;br /&gt; #include &lt;winsock.h&gt;&lt;br /&gt; u_short PASCAL FAR htons( u_short hostshort);&lt;br /&gt; hostshort：主机字节顺序表达的1">
  <meta property="og:description" content="htonl() &lt;p&gt; 简述：&lt;br /&gt; 将主机的无符号短整形数转换成网络字节顺序。&lt;br /&gt; #include &lt;winsock.h&gt;&lt;br /&gt; u_short PASCAL FAR htons( u_short hostshort);&lt;br /&gt; hostshort：主机字节顺序表达的1">
  <meta name="twitter:description" content="htonl() &lt;p&gt; 简述：&lt;br /&gt; 将主机的无符号短整形数转换成网络字节顺序。&lt;br /&gt; #include &lt;winsock.h&gt;&lt;br /&gt; u_short PASCAL FAR htons( u_short hostshort);&lt;br /&gt; hostshort：主机字节顺序表达的1">
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://www.51hint.com/posts/2012-08-23-socket/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="IT技术分享" />

  <meta name="generator" content="Hugo 0.81.0" />
  <link rel="canonical" href="https://www.51hint.com/posts/2012-08-23-socket/" />
  <link rel="alternate" href="https://www.51hint.com/index.xml" type="application/rss+xml" title="IT技术分享">
  
  
  <script src="https://www.51hint.com/js/jquery-1.12.4.min.js"></script>
  <link rel="stylesheet" href="https://www.51hint.com/css/katex.min.css" />
  <link rel="stylesheet" href="https://www.51hint.com/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://www.51hint.com/css/bootstrap.min.css" />
  
  
  
  <link rel="stylesheet" href="https://www.51hint.com/css/main.css" />
  
  
  
  



<link rel="stylesheet" href="https://www.51hint.com/css/photoswipe.css" />
<link rel="stylesheet" href="https://www.51hint.com/css/default-skin/default-skin.css" />





<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>




<link rel="stylesheet" href="https://www.51hint.com/css/styles/atom-one-dark.css" />
<script src="https://www.51hint.com/js/highlight.pack.js"></script>

<script>hljs.initHighlightingOnLoad();</script>
</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.51hint.com/">IT技术分享</a>
    </div>
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        

        

        
        
          <li>
            <a id="mSearch" href="#modalSearch" data-toggle="modal" data-target="#modalSearch" style="outline: none;">
              <span class="hidden-sm hidden-md hidden-lg">Search</span> <span id="searchGlyph" class="glyphicon glyphicon-search"></span>
            </a>
          </li>
          
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
      </div>
    </div>

  </div>
</nav>







    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-md-offset-0">
            <div class="post-heading">
                <h1 align="center">socket</h1>
                
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>




<div id="fastSearch">
  <input id="searchInput" tabindex="0">
  <ul id="searchResults">
  </ul>
</div>

<script src="/js/fuse.min.js"></script>
<script src="/js/fastsearch.js"></script>
<link rel="stylesheet" href="https://www.51hint.com/css/fast.css" />
    
<div class="container" role="main" itemscope itemtype="http://schema.org/Article">
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
            
            
            
<div>
    <section id="datecount">
        <h4 id="date"> Wed Aug 22, 2012</h4>
    </section>
    <h5 id="wc">2000 Words|Read in about 4 Min</h5>
    <h5 id="tags">Tags: 
        
        <a href="https://www.51hint.com/tags/socket/">socket</a> &nbsp;
    </h5>
</div>

            
            <article role="main" class="blog-post" itemprop="articleBody" id="content">
                
  
  <aside class="toc">
    <nav id="TableOfContents"></nav>
  </aside>
  


                <h1 id="htonl">htonl()</h1>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>&lt;p&gt;
  简述：&lt;br /&gt; 将主机的无符号短整形数转换成网络字节顺序。&lt;br /&gt; #include &lt;winsock.h&gt;&lt;br /&gt; u_short PASCAL FAR htons( u_short hostshort);&lt;br /&gt; hostshort：主机字节顺序表达的16位数。
&lt;/p&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;p&gt;
  注释：&lt;br /&gt; 本函数将一个16位数从主机字节顺序转换成网络字节顺序。&lt;br /&gt; 返回值：
&lt;/p&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;p&gt;
  htons()返回一个网络字节顺序的值。&lt;br /&gt; 参见：&lt;br /&gt; htonl(), ntohl(), ntohs().
&lt;/p&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;p&gt;
  &amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;
&lt;/p&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;p&gt;
  简单地说,htons()就是将一个数的高低位互换&lt;br /&gt; (如:12 34 &amp;#8211;&gt; 34 12)&lt;br /&gt; VB表示:&lt;br /&gt; MsgBox Hex(htons(&amp;H1234))&lt;br /&gt; 显示值为 3412
&lt;/p&gt;

&lt;h1&gt;
  inet_addr()
&lt;/h1&gt;

&lt;div&gt;
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    简述：将一个点间隔地址转换成一个in_addr。&lt;br /&gt; #include &lt;winsock.h&gt;&lt;br /&gt; unsigned long PASCAL FAR inet_addr( const struct FAR* cp);
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    cp：一个以Internet标准“.”间隔的字符串。&lt;br /&gt; 注释：
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    本函数解释cp参数中的字符串，这个字符串用Internet的“.”间隔格式表示一个数字的Internet地址。返回值可用作Internet地址。所有Internet地址以网络字节顺序返回(字节从左到右排列)。
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    Internet地址用“.”间隔的地址可有下列几种表达方式：&lt;br /&gt; a.b.c.d，a.b.c，a.b，a
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    当四个部分都有定值时，每个都解释成一个字节数据，从左到右组成Internet四字节地址。请注意，当一个Internet地址在Intel机器上表示成一个32位整型数时，则上述的字节为“d.c.b.a”。这是因为Intel处理器的字节是从右向左排列的。
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    请注意：只有Berkeley支持下述表达法，Internet其余各处均不支持。考虑到与软件的兼容性，应按规定进行使用。
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    对一个三部分地址，最后一部分解释成16位数据并作为网络地址的最右两个字节。这样，三部分地址便很容易表示B组网络地址，如“128.net.host”.
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    对一个两部分地址，最后一部分解释成24位数据并作为网络地址的最右三个字节，这样，两部分地址便很容易表示C组网络地址，如“net.host”。
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    对仅有一个部分的地址，则将它的值直接存入网络地址不作任何字节的重组。
  &lt;/p&gt;
  
  &lt;div&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    返回值：&lt;br /&gt; 若无错误发生，inet_addr()返回一个无符号长整型数，其中以适当字节顺序存放Internet地址。如果传入的字符串不是一个合法的Internet地址，如“a.b.c.d”地址中任一项超过255，那么inet_addr()返回INADDR_NONE。&lt;br /&gt; 参见：&lt;br /&gt; inet_ntoa().
  &lt;/p&gt;
  
  &lt;div&gt;
    &lt;strong&gt;&lt;span style=&quot;font-size: large;&quot;&gt;inet_addr()函数的实现&lt;/span&gt;&lt;/strong&gt;
  &lt;/div&gt;
  
  &lt;p&gt;
    输入是点分的IP地址格式（如A.B.C.D)的字符串，从该字符串中提取出每一部分，转换为ULONG,假设得到4个ULONG型的A,B,C,D,&lt;br /&gt; ulAddress（ULONG型）是转换后的结果，&lt;br /&gt; ulAddress = D&lt;&lt;24 + C&lt;&lt;16 + B&lt;&lt;8 + A(网络字节序），即inet_addr(const char *)的返回结果&lt;br /&gt; 另外，我们也可以得到把该IP转换为主机序的结果，转换方法一样&lt;br /&gt; A&lt;&lt;24 + B&lt;&lt;16 + C&lt;&lt;8 + D
  &lt;/p&gt;
  
  &lt;p&gt;
    &amp;nbsp;
  &lt;/p&gt;
  
  &lt;h1&gt;
    inet_ntoa()
  &lt;/h1&gt;
  
  &lt;div&gt;
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      简述：&lt;br /&gt; 将网络地址转换成“.”点隔的字符串格式。
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      #include &lt;winsock.h&gt;&lt;br /&gt; char FAR* PASCAL FAR inet_ntoa( struct in_addr in);&lt;br /&gt; in：一个表示Internet主机地址的结构。
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      注释：&lt;br /&gt; 本函数将一个用in参数所表示的Internet地址结构转换成以“.” 间隔的诸如“a.b.c.d”的字符串形式。请注意inet_ntoa()返回的字符串存放在WINDOWS套接口实现所分配的内存中。应用程序不应假设该内存是如何分配的。在同一个线程的下一个WINDOWS套接口调用前，数据将保证是有效。
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      返回值：
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      若无错误发生，inet_ntoa()返回一个字符指针。否则的话，返回NULL。其中的数据应在下一个WINDOWS套接口调用前复制出来。
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      测试代码如下
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      include &lt;stdio.h&gt;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      #include &lt;sys/socket.h&gt;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      #include &lt;netinet/in.h&gt;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      #include &lt;arpa/inet.h&gt;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      #include &lt;string.h&gt;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      int main(int aargc, char* argv[])
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      {
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      struct in_addr addr1,addr2;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      ulong l1,l2;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      l1= inet_addr(&amp;#8220;192.168.0.74&amp;#8221;);
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      l2 = inet_addr(&amp;#8220;211.100.21.179&amp;#8221;);
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      memcpy(&amp;addr1, &amp;l1, 4);
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      memcpy(&amp;addr2, &amp;l2, 4);
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      printf(&amp;#8220;%s : %s\n&amp;#8221;, inet_ntoa(addr1), inet_ntoa(addr2)); //注意这一句的运行结果
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      printf(&amp;#8220;%s\n&amp;#8221;, inet_ntoa(addr1));
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      printf(&amp;#8220;%s\n&amp;#8221;, inet_ntoa(addr2));
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      return 0;
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      }
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      实际运行结果如下：
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      192.168.0.74 : 192.168.0.74 //从这里可以看出,printf里的inet_ntoa只运行了一次。
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      192.168.0.74
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      211.100.21.179
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      inet_ntoa返回一个char *,而这个char *的空间是在inet_ntoa里面静态分配的，所以inet_ntoa后面的调用会覆盖上一次的调用。第一句printf的结果只能说明在printf里面的可变参数的求值是从右到左的，仅此而已。
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      参见：
    &lt;/p&gt;
    
    &lt;div&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      inet_addr().
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<!-- raw HTML omitted -->
<p> </p>
<p> </p>

            </article>

            <ul class="pager blog-pager">
                
                <li class="previous">
                    <a href="https://www.51hint.com/posts/2012-08-22-everything-start-ftp-server/" data-toggle="tooltip" data-placement="top" title="Everything, Start FTP Server">&larr; Previous Post</a>
                </li>
                 
                <li class="next">
                    <a href="https://www.51hint.com/posts/2012-08-23-%E7%AE%80%E5%8D%95rtp%E5%8F%91%E9%80%81%E7%B1%BBc%E5%AE%9E%E7%8E%B0/" data-toggle="tooltip" data-placement="top" title="简单RTP发送类c&#43;&#43;实现">Next Post &rarr;</a>
                </li>
                
            </ul>
            
            <div>
                 
            </div>
            
            
            
            
<div>
    <section id="datecount">
        <h4 id="date"> Wed Aug 22, 2012</h4>
    </section>
    <h5 id="wc">2000 Words|Read in about 4 Min</h5>
    <h5 id="tags">Tags: 
        
        <a href="https://www.51hint.com/tags/socket/">socket</a> &nbsp;
    </h5>
</div>

            
            </div>
            
            
        </div>
    </div>
    </section>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
        
          
          
        </ul>
        <p class="credits copyright text-muted">
        &copy;2017-2018
          
          
          
            &nbsp;&bull;&nbsp;
            <a href="https://www.51hint.com/">IT技术分享</a>
          
        </p>
        <p class="credits theme-by text-muted">
          
        </p>

        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.81.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/rootsongjc/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>




<script src="https://www.51hint.com/js/bootstrap.min.js"></script>
<script src="https://www.51hint.com/js/photoswipe-ui-default.min.js"></script>
<script src="https://www.51hint.com/js/photoswipe.min.js"></script>
<script src="https://www.51hint.com/js/auto-render.min.js"></script>
<script src="https://www.51hint.com/js/main.js"></script>
<script src="https://www.51hint.com/js/prism.js"></script>
<script src="https://www.51hint.com/js/katex.min.js"></script>

<script> renderMathInElement(document.body); </script>







  </body>
</html>


<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title> Redux_toolkit - </title>
  <meta name="description" content="" />
  <meta property="og:title" content="Redux_toolkit" />
  <meta name="twitter:title" content="Redux_toolkit" />
  <meta name="description" content="redux tookitå®˜æ–¹æ¨¡æ¿æ¡†æ¶">
  <meta property="og:description" content="redux tookitå®˜æ–¹æ¨¡æ¿æ¡†æ¶">
  <meta name="twitter:description" content="redux tookitå®˜æ–¹æ¨¡æ¿æ¡†æ¶">
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://www.51hint.com/posts/redux_toolkit/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="ITæŠ€æœ¯åˆ†äº«" />

  <meta name="generator" content="Hugo 0.81.0" />
  <link rel="canonical" href="https://www.51hint.com/posts/redux_toolkit/" />
  <link rel="alternate" href="https://www.51hint.com/index.xml" type="application/rss+xml" title="ITæŠ€æœ¯åˆ†äº«">
  
  
  <script src="https://www.51hint.com/js/jquery-1.12.4.min.js"></script>
  <link rel="stylesheet" href="https://www.51hint.com/css/katex.min.css" />
  <link rel="stylesheet" href="https://www.51hint.com/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://www.51hint.com/css/bootstrap.min.css" />
  
  
  
  <link rel="stylesheet" href="https://www.51hint.com/css/main.css" />
  
  
  
  



<link rel="stylesheet" href="https://www.51hint.com/css/photoswipe.css" />
<link rel="stylesheet" href="https://www.51hint.com/css/default-skin/default-skin.css" />





<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>




<link rel="stylesheet" href="https://www.51hint.com/css/styles/atom-one-dark.css" />
<script src="https://www.51hint.com/js/highlight.pack.js"></script>

<script>hljs.initHighlightingOnLoad();</script>
</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.51hint.com/">ITæŠ€æœ¯åˆ†äº«</a>
    </div>
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        

        

        
        
          <li>
            <a id="mSearch" href="#modalSearch" data-toggle="modal" data-target="#modalSearch" style="outline: none;">
              <span class="hidden-sm hidden-md hidden-lg">Search</span> <span id="searchGlyph" class="glyphicon glyphicon-search"></span>
            </a>
          </li>
          
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
      </div>
    </div>

  </div>
</nav>







    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-md-offset-0">
            <div class="posts-heading">
                <h1 align="center">Redux_toolkit</h1>
                
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>




<div id="fastSearch">
  <input id="searchInput" tabindex="0">
  <ul id="searchResults">
  </ul>
</div>

<script src="/js/fuse.min.js"></script>
<script src="/js/fastsearch.js"></script>
<link rel="stylesheet" href="https://www.51hint.com/css/fast.css" />
    
<div class="container" role="main" itemscope itemtype="http://schema.org/Article">
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
            
            
              
            <article role="main" class="blog-post" itemprop="articleBody" id="content">
                

                <h4 id="redux-tookit">redux tookit</h4>
<p><a href="https://redux-toolkit.js.org/">https://redux-toolkit.js.org/</a></p>
<p>å¦‚æœä½ çš„Reacté¡¹ç›®ä¸­ä½¿ç”¨react hookã€reduxã€redux-thunkï¼Œå¯èƒ½ä½ éœ€è¦ç”¨ redux-toolkit ï¼ˆä»¥ä¸‹ç®€ç§°RTKï¼‰ä¼˜åŒ–ä½ çš„é¡¹ç›®ç»“æ„ï¼Œå®ƒçœ‹èµ·æ¥å¯ä»¥è¿™ä¹ˆæ¸…çˆ½</p>
<h3 id="redux-ä½¿ç”¨å¸¸è§é—®é¢˜">Redux ä½¿ç”¨å¸¸è§é—®é¢˜</h3>
<ul>
<li>é…ç½®å¤æ‚ï¼Œdevtool&hellip;</li>
<li>æ¨¡æ¿ä»£ç å¤ªå¤šï¼Œåˆ›å»ºconstantï¼Œactionï¼Œreducer&hellip;</li>
<li>éœ€è¦æ·»åŠ å¾ˆå¤šä¾èµ–åŒ…ï¼Œå¦‚redux-thunkã€immer&hellip;</li>
</ul>
<pre><code># ä¼˜åŒ–å‰
 /counter
    constants.ts
    actions.ts
    reducer.ts
    saga.ts
    index.tsxÃ
# ä¼˜åŒ–å
/counter
    slice.ts
    index.tsx
å¤åˆ¶ä»£ç 
</code></pre><h3 id="rtkå¹²äº†å“ªäº›äº‹">RTKå¹²äº†å“ªäº›äº‹ï¼Ÿ</h3>
<ul>
<li><code>configureStore()</code> åŒ…è£¹createStoreï¼Œå¹¶é›†æˆäº†<code>redux-thunk</code>ã€<code>Redux DevTools Extension</code>ï¼Œé»˜è®¤å¼€å¯</li>
<li><code>createReducer()</code> åˆ›å»ºä¸€ä¸ªreducerï¼Œaction type æ˜ å°„åˆ° case reducer å‡½æ•°ä¸­ï¼Œä¸ç”¨å†™switch-caseï¼Œå¹¶é›†æˆ<code>immer</code></li>
<li><code>createAction()</code> åˆ›å»ºä¸€ä¸ªactionï¼Œä¼ å…¥åŠ¨ä½œç±»å‹å­—ç¬¦ä¸²ï¼Œè¿”å›åŠ¨ä½œå‡½æ•°</li>
<li><code>createSlice()</code> åˆ›å»ºä¸€ä¸ªsliceï¼ŒåŒ…å« createReducerã€createActionçš„æ‰€æœ‰åŠŸèƒ½</li>
<li><code>createAsyncThunk()</code> åˆ›å»ºä¸€ä¸ªthunkï¼Œæ¥å—ä¸€ä¸ªåŠ¨ä½œç±»å‹å­—ç¬¦ä¸²å’Œä¸€ä¸ªPromiseçš„å‡½æ•°</li>
<li>&hellip;</li>
</ul>
<hr>
<h2 id="apis">APIs</h2>
<h3 id="configurestore">configureStore</h3>
<blockquote>
<p><a href="https://redux-toolkit.js.org/api/configurestore/">configureStore</a> @ Redux Toolkit</p>
</blockquote>
<p>åœ¨ redux ä¸­åŸæœ¬å°±æœ‰ <code>createStore</code> é€™å€‹æ–¹æ³•ï¼Œè€Œ <code>configureStore</code> å¯ä»¥è¦–ç‚ºåŠ å¼·ç‰ˆçš„ <code>createStore</code>ï¼Œé€é <code>configureStore()</code> å¯ä»¥ç°¡åŒ–è¨­å®šçš„æµç¨‹ã€çµåˆ slice reducersã€æ·»åŠ å’Œ Redux æœ‰é—œçš„ middlewareã€ä¸¦å•Ÿç”¨ Redux DevTools çš„æ“´å……å¥—ä»¶ã€‚</p>
<pre><code>// Before:
import { createStore } from 'redux';
const store = createStore(counter);

// After:
import { configureStore } from '@reduxjs/toolkit';
const store = configureStore({
  reducer: counter
})
</code></pre><h3 id="createaction">createAction</h3>
<blockquote>
<p><a href="https://redux-toolkit.js.org/api/createaction/">createAction</a> @ Redux Toolkit</p>
</blockquote>
<p><code>createAction()</code> é€™å€‹å·¥å…·æœƒæ ¹æ“š action type å›å‚³å°æ‡‰çš„ action creator functionï¼Œé€™å€‹å‡½å¼æœ¬èº«å…§å»º <code>toString()</code>ï¼Œå› æ­¤å¯ä»¥ä¸å†é¡å¤–å®šç¾© TYPE å¸¸æ•¸ã€‚é€™å€‹æ–¹æ³•æœ‰æ•ˆç°¡åŒ–åœ¨ redux ä¸­éœ€è¦å…ˆå®šç¾© action type çš„å¸¸æ•¸ï¼Œç„¶å¾Œåˆåœ¨ action ä¸­è¼‰å…¥é€™å€‹ action type å¸¸æ•¸çš„å†—é•·æ­¥é©Ÿã€‚</p>
<p>é€é <code>createAction</code> æœƒï¼š</p>
<ul>
<li>è‡ªå‹•ç”¢ç”Ÿä¸€å€‹ type ç‚º ã€Œ<code>createAction</code> åƒæ•¸ã€çš„ action creator</li>
<li>åŸ·è¡Œé€™å€‹ action æ™‚ï¼ŒæœƒæŠŠåƒæ•¸çš„å…§å®¹ç›´æ¥æ”¾å…¥ <code>action.payload</code> ä¸­</li>
</ul>
<pre><code>import { createAction } from '@reduxjs/toolkit';

// é€é createAction å¯ä»¥ç”¢ç”Ÿä¸€å€‹ action creator
const increment = createAction('counter/increment');

let action;
// è‡ªå‹•ç”¢ç”Ÿä¸€å€‹ type ç‚º counter/increment çš„ action
action = increment(); // { type: 'counter/increment', payload: undefined }

// åƒæ•¸å…§å®¹æœƒè‡ªå‹•æ”¾å…¥ action.payload ä¸­
action = increment(3); //  { type: 'counter/increment', payload: 3 }

// è¤‡å¯«åŸæœ¬çš„ toString() æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å–å¾—è©² action çš„ type åç¨±
increment.toString(); // 'counter/increment'
increment.type; // 'counter/increment'
</code></pre><blockquote>
<p>ğŸ”– å‚™è¨»ï¼š<code>action</code> æ˜¯ä¸€å€‹å¸¶æœ‰ <code>type</code> å’Œ <code>payload</code> çš„ã€Œç‰©ä»¶ã€ï¼›<code>action creator</code> æ˜¯ä¸€å€‹æœƒç”¢ç”Ÿ <code>action</code> çš„ã€Œå‡½å¼ã€ã€‚å› æ­¤ï¼Œé€™è£¡çš„ <code>createAction</code> å¯¦éš›ä¸Šæ˜¯ç”¢ç”Ÿä¸€å€‹ <code>action creator</code> è€Œä¸æ˜¯ç”¢ç”Ÿä¸€å€‹ <code>action</code>ã€‚</p>
</blockquote>
<p>åŸæœ¬ä½¿ç”¨ redux çš„å¯«æ³•ï¼š</p>
<pre><code>const INCREMENT = 'counter/increment';

// é€™æ˜¯ä¸€å€‹ action creator
function increment(amount) {
  return {
    type: INCREMENT,
    payload: amount
  };
}

// é€™æ˜¯ä¸€å€‹ action
const action = increment(3);  // { type: 'counter/increment', payload: 3 }
</code></pre><h3 id="createreducer">createReducer</h3>
<blockquote>
<p><a href="https://redux-toolkit.js.org/api/createreducer/">createReducer</a> @ Redux Toolkit</p>
</blockquote>
<p><code>createReducer()</code> é€™å€‹å·¥å…·æä¾›ä½ ä¸€å¼µ action type å’Œ reducer çš„å°æ‡‰è¡¨ï¼Œè€Œä¸ç”¨ä½¿ç”¨ <code>switch</code> èªæ³•ï¼Œæ­¤å¤–å®ƒè‡ªå‹•ä½¿ç”¨ <a href="https://github.com/mweststrate/immer"><code>immer</code> library</a> é€™å€‹å·¥å…·ï¼Œè®“ä½ å¯ä»¥ä½¿ç”¨ã€Œimmutableã€çš„æ–¹å¼ä¾†è®Šæ›´è³‡æ–™ç‹€æ…‹ï¼Œä¾‹å¦‚ï¼Œ<code>state.todos[3].completed = true</code>ã€‚</p>
<pre><code>// ä½¿ç”¨ createReducer
const increment = createAction('INCREMENT')
const decrement = createAction('DECREMENT')

// ä½¿ç”¨ ES6 ä¸­ç‰©ä»¶çš„ computed property èªæ³•
// åŸæœ¬æ˜¯å¯« [increment.type] ä½†å› ç‚º increment å…§å»º toString() æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥å¯«æˆ [increment]
const counter = createReducer(0, {
  [increment]: (state, action) =&gt; state + 1,
  [decrement]: (state, action) =&gt; state - 1
})
</code></pre><p>åŸæœ¬ Redux ä¸­çš„å¯«æ³•ï¼š</p>
<pre><code>// é€™æ˜¯ä¸€å€‹ reducer
const counter = (state = 0, action) =&gt; {
  if (typeof state === 'undefined') {
    return 0;
  }

  switch (action.type) {
    case increment.type:
      return state + 1;
    case decrement.type:
      return state - 1;
    default:
      return state;
  }
};
</code></pre><h3 id="createslice">createSlice</h3>
<blockquote>
<p><a href="https://redux-toolkit.js.org/api/createslice/">createSlice</a> @ Redux Toolkit</p>
</blockquote>
<p>ä¸Šé¢é›–ç„¶å·²ç¶“æœ‰åƒæ˜¯ <code>createAction</code> å’Œ <code>createReducer</code>ï¼Œä½†å¦‚æœæˆ‘å€‘èƒ½å¤ åœ¨ä¸€å€‹åœ°æ–¹åŒæ™‚å»ºç«‹ action creatorã€reducers çš„è©±ï¼Œç®¡ç†èµ·ä¾†æ‡‰è©²æœƒè®Šå¾—æ›´ç‚ºæ–¹ä¾¿ï¼Œ <code>createSlice()</code> æ–¼æ˜¯ç”¢ç”Ÿã€‚</p>
<p>åœ¨ <code>createSlice()</code> é€™å€‹å‡½å¼ä¸­å¯ä»¥å¸¶å…¥ reducer function, slice name å’Œ initial stateï¼Œå°‡è‡ªå‹•ç”¢ç”Ÿå°æ‡‰çš„ slice reducerï¼Œä¸¦åŒ…å«å°æ‡‰çš„ action creators å’Œ action types åœ¨å…§ã€‚</p>
<p>ä»¥å‰›å‰›çš„ä¾‹å­ä¾†èªªï¼š</p>
<pre><code>// åŸæœ¬ä½¿ç”¨ createAction å’Œ createReducer

const increment = createAction('INCREMENT')
const decrement = createAction('DECREMENT')
const counter = createReducer(0, {
  [increment]: state =&gt; state + 1,
  [decrement]: state =&gt; state - 1
})

const store = configureStore({
  reducer: counter
})

document.getElementById('increment').addEventListener('click', () =&gt; {
  store.dispatch(increment())
})
</code></pre><p>é€é <code>createSlice</code> å°‡è‡ªå‹•ç”¢ç”Ÿ <strong>action creators</strong> å’Œ <strong>action types</strong>ï¼š</p>
<pre><code>// ä½¿ç”¨ createSlice å¾Œ
const counterSlice = createSlice({
  name: 'counter',
  initialState: 0,
  reducers: {
    increment: (state, action) =&gt; state + 1,
    decrement: (state, action) =&gt; state - 1
  }
})

const store = configureStore({
  reducer: counterSlice.reducer
})

document.getElementById('increment').addEventListener('click', () =&gt; {
  store.dispatch(counterSlice.actions.increment())
})
</code></pre><p>åœ¨ä¸Šè¿° <code>createSlice</code> ç”¢ç”Ÿçš„ <code>counterSlice</code> ç‰©ä»¶ä¸­æœ‰é€™äº›å¯ç”¨çš„å±¬æ€§å’Œæ–¹æ³•ï¼š</p>
<pre><code>// slice çš„åç¨±
counterSlice.name;    // &quot;counter&quot;

// actions type
counterSlice.actions.increment.type;      // &quot;counter/increment&quot;ï¼Œä¸€æ¨£æœ‰å…§å»º toString æ–¹æ³•
counterSlice.actions.decrement.type;      // &quot;counter/increment&quot;ï¼Œä¸€æ¨£æœ‰å…§å»º toString æ–¹æ³•

// dispatch action
counterSlice.actions.increment();  // counterSlice.actions.increment æ˜¯ action creator
counterSlice.actions.decrement();

// reducer
counterSlice.reducer;
</code></pre><h3 id="createselector">createSelector</h3>
<blockquote>
<p><a href="https://redux-toolkit.js.org/api/createSelector">createSelector</a> @ Redux Toolkit</p>
</blockquote>
<p><code>createSelector</code> é€™å€‹å·¥å…·ä¾†è‡ª <a href="https://github.com/reduxjs/reselect">Reselect</a> é€™å€‹å¥—ä»¶ã€‚</p>
<hr>
<h2 id="å°‡-redux-starter-kit-æ•´åˆé€²å°ˆæ¡ˆçš„æ­¥é©Ÿ">å°‡ Redux Starter Kit æ•´åˆé€²å°ˆæ¡ˆçš„æ­¥é©Ÿ</h2>
<h3 id="packages">Packages</h3>
<ul>
<li><a href="https://redux.js.org/">redux</a></li>
<li><a href="https://react-redux.js.org/">react-redux</a></li>
<li><a href="https://redux-toolkit.js.org/">@reduxjs/toolkit</a></li>
</ul>
<h3 id="step-1-create-reducer">STEP 1: Create Reducer</h3>
<pre><code>// ./reducers.js
import { combineReducers } from 'redux';
// import reducers here...
import postsSlice from './slices/posts';

const rootReducer = combineReducers({
  // combine reducers here...
  posts: postsSlice.reducer,
});

export default rootReducer;
</code></pre><h3 id="step-2-createstore">STEP 2: createStore</h3>
<pre><code>// ./store.js
import { configureStore } from 'redux-starter-kit';
import rootReducer from './reducers';

export default function configureAppStore(preloadedState) {
  const store = configureStore({
    reducer: rootReducer,
    preloadedState
  });

  // handle hot reloading
  if (process.env.NODE_ENV !== 'production' &amp;&amp; module.hot) {
    module.hot.accept('./reducers', () =&gt; store.replaceReducer(rootReducer));
  }

  return store;
}
</code></pre><h3 id="step-3-mount-store">STEP 3: Mount Store</h3>
<pre><code>// ./index.js
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './components/App';
import { Provider } from 'react-redux';
import configureAppStore from './store';

const store = configureAppStore();

ReactDOM.render(
  &lt;Provider store={store}&gt;
    &lt;App /&gt;
  &lt;/Provider&gt;,
  document.getElementById('root')
);
</code></pre><p>Tags: <a href="https://pjchender.github.io/tags#redux">redux</a></p>

            </article>

            <ul class="pager blog-pager">
                
                <li class="previous">
                    <a href="https://www.51hint.com/posts/react_redux%E8%AE%B2%E8%A7%A3/" data-toggle="tooltip" data-placement="top" title="React_reduxè®²è§£">&larr; Previous Post</a>
                </li>
                 
                <li class="next">
                    <a href="https://www.51hint.com/posts/umijs_davjs%E5%85%A5%E9%97%A8/" data-toggle="tooltip" data-placement="top" title="Umijs_davjså…¥é—¨">Next Post &rarr;</a>
                </li>
                
            </ul>
            
            <div>
                 
                <h2>See Also</h2>
                <ul>
                    
                    <li><a href="/posts/react_redux%E8%AE%B2%E8%A7%A3/">React_reduxè®²è§£</a></li>
                    
                    <li><a href="/posts/react-native-training-redux-4-ways/">react-native-training/redux-4-ways</a></li>
                    
                    <li><a href="/posts/react-reduxyong-fa/">React-Reduxç”¨æ³•</a></li>
                    
                    <li><a href="/posts/redux/">redux</a></li>
                    
                    <li><a href="/posts/gorm%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2/">Gormå…³è”æŸ¥è¯¢</a></li>
                    
                </ul>
                
            </div>
            
            
            
              
            </div>
            
            
        </div>
    </div>
    </section>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
        
          
          
        </ul>
        <p class="credits copyright text-muted">
        &copy;2017-2018
          
          
          
            &nbsp;&bull;&nbsp;
            <a href="https://www.51hint.com/">ITæŠ€æœ¯åˆ†äº«</a>
          
        </p>
        <p class="credits theme-by text-muted">
          
        </p>

        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.81.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/rootsongjc/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>




<script src="https://www.51hint.com/js/bootstrap.min.js"></script>
<script src="https://www.51hint.com/js/photoswipe-ui-default.min.js"></script>
<script src="https://www.51hint.com/js/photoswipe.min.js"></script>
<script src="https://www.51hint.com/js/auto-render.min.js"></script>
<script src="https://www.51hint.com/js/main.js"></script>
<script src="https://www.51hint.com/js/prism.js"></script>
<script src="https://www.51hint.com/js/katex.min.js"></script>

<script> renderMathInElement(document.body); </script>







  </body>
</html>

